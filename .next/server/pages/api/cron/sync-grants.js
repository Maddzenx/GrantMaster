"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/cron/sync-grants";
exports.ids = ["pages/api/cron/sync-grants"];
exports.modules = {

/***/ "(api-node)/./app/lib/supabase.js":
/*!*****************************!*\
  !*** ./app/lib/supabase.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\n// Create a single supabase client for interacting with your database\nconst supabaseUrl = \"https://mfqwewsuxvwvlbtfxwai.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1mcXdld3N1eHZ3dmxidGZ4d2FpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NDkxODUsImV4cCI6MjA2MjUyNTE4NX0.-T0jfReNulJJ8cxCmHuK9WOr3U9SD2FYs967kCwhJtE\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Missing Supabase environment variables');\n}\nconsole.log('Supabase URL:', supabaseUrl);\nconsole.log('Supabase Anon Key:', supabaseAnonKey);\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// const { data, error } = await supabase.auth.signInWithPassword({ email, password });\n// console.log('Login result:', data, error); \nconst handleLogin = async (e)=>{\n    e.preventDefault();\n    try {\n        const { data, error } = await supabase.auth.signInWithPassword({\n            email,\n            password\n        });\n        console.log('Login result:', data, error);\n    // ...rest of your login logic\n    } catch (err) {\n    // handle error\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2FwcC9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9EO0FBRXBELHFFQUFxRTtBQUNyRSxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFFakUsSUFBSSxDQUFDRCxlQUFlLENBQUNJLGlCQUFpQjtJQUNwQyxNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQUMsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQlI7QUFDN0JPLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0JKO0FBRTNCLE1BQU1LLFdBQVdWLG1FQUFZQSxDQUFDQyxhQUFhSSxpQkFBZ0I7QUFFbEUsdUZBQXVGO0FBQ3ZGLDhDQUE4QztBQUU5QyxNQUFNTSxjQUFjLE9BQU9DO0lBQ3pCQSxFQUFFQyxjQUFjO0lBQ2hCLElBQUk7UUFDRixNQUFNLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUwsU0FBU00sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQztZQUFFQztZQUFPQztRQUFTO1FBQ2pGWCxRQUFRQyxHQUFHLENBQUMsaUJBQWlCSyxNQUFNQztJQUNuQyw4QkFBOEI7SUFDaEMsRUFBRSxPQUFPSyxLQUFLO0lBQ1osZUFBZTtJQUNqQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFkZWxlaW5leGlhL0dyYW50TWFzdGVyL2FwcC9saWIvc3VwYWJhc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG4vLyBDcmVhdGUgYSBzaW5nbGUgc3VwYWJhc2UgY2xpZW50IGZvciBpbnRlcmFjdGluZyB3aXRoIHlvdXIgZGF0YWJhc2VcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpXG59XG5cbmNvbnNvbGUubG9nKCdTdXBhYmFzZSBVUkw6Jywgc3VwYWJhc2VVcmwpO1xuY29uc29sZS5sb2coJ1N1cGFiYXNlIEFub24gS2V5OicsIHN1cGFiYXNlQW5vbktleSk7XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KSBcblxuLy8gY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoeyBlbWFpbCwgcGFzc3dvcmQgfSk7XG4vLyBjb25zb2xlLmxvZygnTG9naW4gcmVzdWx0OicsIGRhdGEsIGVycm9yKTsgXG5cbmNvbnN0IGhhbmRsZUxvZ2luID0gYXN5bmMgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkKHsgZW1haWwsIHBhc3N3b3JkIH0pO1xuICAgIGNvbnNvbGUubG9nKCdMb2dpbiByZXN1bHQ6JywgZGF0YSwgZXJyb3IpO1xuICAgIC8vIC4uLnJlc3Qgb2YgeW91ciBsb2dpbiBsb2dpY1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBoYW5kbGUgZXJyb3JcbiAgfVxufTsgIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwic3VwYWJhc2UiLCJoYW5kbGVMb2dpbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGEiLCJlcnJvciIsImF1dGgiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJlbWFpbCIsInBhc3N3b3JkIiwiZXJyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./app/lib/supabase.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcron%2Fsync-grants&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcron%2Fsync-grants.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcron%2Fsync-grants&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcron%2Fsync-grants.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_cron_sync_grants_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/cron/sync-grants.ts */ \"(api-node)/./pages/api/cron/sync-grants.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_cron_sync_grants_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_cron_sync_grants_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_cron_sync_grants_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_cron_sync_grants_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/cron/sync-grants\",\n        pathname: \"/api/cron/sync-grants\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_cron_sync_grants_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGY3JvbiUyRnN5bmMtZ3JhbnRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZjcm9uJTJGc3luYy1ncmFudHMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jcm9uL3N5bmMtZ3JhbnRzLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jcm9uL3N5bmMtZ3JhbnRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY3Jvbi9zeW5jLWdyYW50c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcron%2Fsync-grants&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcron%2Fsync-grants.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/cron/sync-grants.ts":
/*!***************************************!*\
  !*** ./pages/api/cron/sync-grants.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _services_vinnovaSync__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../services/vinnovaSync */ \"(api-node)/./services/vinnovaSync.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_vinnovaSync__WEBPACK_IMPORTED_MODULE_0__]);\n_services_vinnovaSync__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Set your secret in .env as CRON_SECRET=your_secret_value\nconst CRON_SECRET = process.env.CRON_SECRET;\nasync function handler(req, res) {\n    console.log('CRON_SECRET from env:', CRON_SECRET);\n    console.log('Provided secret:', req.headers['x-cron-secret']);\n    // Require POST\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    // Authenticate using x-cron-secret header\n    const providedSecret = req.headers['x-cron-secret'];\n    if (!CRON_SECRET || !providedSecret || providedSecret !== CRON_SECRET) {\n        return res.status(401).json({\n            error: 'Unauthorized'\n        });\n    }\n    try {\n        const report = await (0,_services_vinnovaSync__WEBPACK_IMPORTED_MODULE_0__.syncVinnovaGrants)();\n        res.status(200).json({\n            success: true,\n            report\n        });\n    } catch (error) {\n        res.status(500).json({\n            success: false,\n            error: error.message || String(error)\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9jcm9uL3N5bmMtZ3JhbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ2tFO0FBRWxFLDJEQUEyRDtBQUMzRCxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVc7QUFFNUIsZUFBZUcsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0VDLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJQO0lBQ3JDTSxRQUFRQyxHQUFHLENBQUMsb0JBQW9CSCxJQUFJSSxPQUFPLENBQUMsZ0JBQWdCO0lBQzVELGVBQWU7SUFDZixJQUFJSixJQUFJSyxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPSixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7SUFDNUQ7SUFFQSwwQ0FBMEM7SUFDMUMsTUFBTUMsaUJBQWlCVCxJQUFJSSxPQUFPLENBQUMsZ0JBQWdCO0lBQ25ELElBQUksQ0FBQ1IsZUFBZSxDQUFDYSxrQkFBa0JBLG1CQUFtQmIsYUFBYTtRQUNyRSxPQUFPSyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBZTtJQUN0RDtJQUVBLElBQUk7UUFDRixNQUFNRSxTQUFTLE1BQU1mLHdFQUFpQkE7UUFDdENNLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUksU0FBUztZQUFNRDtRQUFPO0lBQy9DLEVBQUUsT0FBT0YsT0FBWTtRQUNuQlAsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFSSxTQUFTO1lBQU9ILE9BQU9BLE1BQU1JLE9BQU8sSUFBSUMsT0FBT0w7UUFBTztJQUMvRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFkZWxlaW5leGlhL0dyYW50TWFzdGVyL3BhZ2VzL2FwaS9jcm9uL3N5bmMtZ3JhbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgc3luY1Zpbm5vdmFHcmFudHMgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy92aW5ub3ZhU3luYyc7XG5cbi8vIFNldCB5b3VyIHNlY3JldCBpbiAuZW52IGFzIENST05fU0VDUkVUPXlvdXJfc2VjcmV0X3ZhbHVlXG5jb25zdCBDUk9OX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkNST05fU0VDUkVUO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnNvbGUubG9nKCdDUk9OX1NFQ1JFVCBmcm9tIGVudjonLCBDUk9OX1NFQ1JFVCk7XG4gIGNvbnNvbGUubG9nKCdQcm92aWRlZCBzZWNyZXQ6JywgcmVxLmhlYWRlcnNbJ3gtY3Jvbi1zZWNyZXQnXSk7XG4gIC8vIFJlcXVpcmUgUE9TVFxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgLy8gQXV0aGVudGljYXRlIHVzaW5nIHgtY3Jvbi1zZWNyZXQgaGVhZGVyXG4gIGNvbnN0IHByb3ZpZGVkU2VjcmV0ID0gcmVxLmhlYWRlcnNbJ3gtY3Jvbi1zZWNyZXQnXTtcbiAgaWYgKCFDUk9OX1NFQ1JFVCB8fCAhcHJvdmlkZWRTZWNyZXQgfHwgcHJvdmlkZWRTZWNyZXQgIT09IENST05fU0VDUkVUKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBzeW5jVmlubm92YUdyYW50cygpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgcmVwb3J0IH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgU3RyaW5nKGVycm9yKSB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsic3luY1Zpbm5vdmFHcmFudHMiLCJDUk9OX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImhlYWRlcnMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJwcm92aWRlZFNlY3JldCIsInJlcG9ydCIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiU3RyaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/cron/sync-grants.ts\n");

/***/ }),

/***/ "(api-node)/./services/vinnova.ts":
/*!*****************************!*\
  !*** ./services/vinnova.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VinnovaService: () => (/* binding */ VinnovaService),\n/* harmony export */   fetchVinnovaGrants: () => (/* binding */ fetchVinnovaGrants),\n/* harmony export */   normalizeGrant: () => (/* binding */ normalizeGrant)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Use the Vinnova Open Data API base URL\nconst VINNOVA_OPEN_DATA_BASE_URL = 'https://data.vinnova.se/api';\n// Fetch calls (utlysningar) from Vinnova Open Data API\n// Pass a date string (e.g., '2019-09-01') to get all calls changed since that date\nasync function fetchVinnovaGrants(sinceDate = '2019-09-01') {\n    try {\n        const url = `${VINNOVA_OPEN_DATA_BASE_URL}/utlysningar/${sinceDate}`;\n        console.log('Fetching Vinnova open calls from:', url);\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url);\n        console.log('Vinnova Open Data API response:', response.status, response.data);\n        return response.data;\n    } catch (error) {\n        if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError && axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(error) && error.response) {\n            console.error('Vinnova Open Data API error:', error.response.status, error.response.data);\n        } else {\n            console.error('Vinnova Open Data API error:', error);\n        }\n        throw error;\n    }\n}\n// normalizeGrant function\nfunction normalizeGrant(input) {\n    if (!input || typeof input !== 'object') return null;\n    // Use Vinnova Open Data field names (case-sensitive)\n    const id = typeof input.Diarienummer === 'string' ? input.Diarienummer : typeof input.diarienummer === 'string' ? input.diarienummer : null;\n    if (!id) return null;\n    const title = input.Titel ?? input.titel ?? null;\n    const description = input.Beskrivning ?? input.beskrivning ?? null;\n    // No explicit deadline field; use Publiceringsdatum as a fallback\n    let deadline = input.Publiceringsdatum ?? input.publiceringsdatum ?? null;\n    if (deadline && typeof deadline === 'string') {\n        // Format as YYYY-MM-DD if possible\n        const match = deadline.match(/(\\d{4})-(\\d{2})-(\\d{2})/);\n        if (match) deadline = `${match[1]}-${match[2]}-${match[3]}`;\n    }\n    // No sector or stage in this API\n    const sector = null;\n    const stage = null;\n    return {\n        id: String(id),\n        title: title != null ? String(title) : null,\n        description: description != null ? String(description) : null,\n        deadline: deadline != null ? String(deadline) : null,\n        sector,\n        stage\n    };\n}\n// VinnovaService class for compatibility with existing code/tests\nclass VinnovaService {\n    async getCalls(sinceDate = '2019-09-01') {\n        return await fetchVinnovaGrants(sinceDate);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NlcnZpY2VzL3Zpbm5vdmEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwQjtBQUUxQix5Q0FBeUM7QUFDekMsTUFBTUMsNkJBQTZCO0FBRW5DLHVEQUF1RDtBQUN2RCxtRkFBbUY7QUFDNUUsZUFBZUMsbUJBQW1CQyxZQUFvQixZQUFZO0lBQ3ZFLElBQUk7UUFDRixNQUFNQyxNQUFNLEdBQUdILDJCQUEyQixhQUFhLEVBQUVFLFdBQVc7UUFDcEVFLFFBQVFDLEdBQUcsQ0FBQyxxQ0FBcUNGO1FBQ2pELE1BQU1HLFdBQVcsTUFBTVAsaURBQVMsQ0FBQ0k7UUFDakNDLFFBQVFDLEdBQUcsQ0FBQyxtQ0FBbUNDLFNBQVNFLE1BQU0sRUFBRUYsU0FBU0csSUFBSTtRQUM3RSxPQUFPSCxTQUFTRyxJQUFJO0lBQ3RCLEVBQUUsT0FBT0MsT0FBTztRQUNkLElBQUlYLDBEQUFrQixJQUFJQSwwREFBa0IsQ0FBQ1csVUFBVUEsTUFBTUosUUFBUSxFQUFFO1lBQ3JFRixRQUFRTSxLQUFLLENBQUMsZ0NBQWdDQSxNQUFNSixRQUFRLENBQUNFLE1BQU0sRUFBRUUsTUFBTUosUUFBUSxDQUFDRyxJQUFJO1FBQzFGLE9BQU87WUFDTEwsUUFBUU0sS0FBSyxDQUFDLGdDQUFnQ0E7UUFDaEQ7UUFDQSxNQUFNQTtJQUNSO0FBQ0Y7QUFZQSwwQkFBMEI7QUFDbkIsU0FBU0UsZUFBZUMsS0FBVTtJQUN2QyxJQUFJLENBQUNBLFNBQVMsT0FBT0EsVUFBVSxVQUFVLE9BQU87SUFDaEQscURBQXFEO0lBQ3JELE1BQU1DLEtBQ0osT0FBT0QsTUFBTUUsWUFBWSxLQUFLLFdBQzFCRixNQUFNRSxZQUFZLEdBQ2xCLE9BQU9GLE1BQU1HLFlBQVksS0FBSyxXQUM5QkgsTUFBTUcsWUFBWSxHQUNsQjtJQUNOLElBQUksQ0FBQ0YsSUFBSSxPQUFPO0lBRWhCLE1BQU1HLFFBQVFKLE1BQU1LLEtBQUssSUFBSUwsTUFBTU0sS0FBSyxJQUFJO0lBQzVDLE1BQU1DLGNBQWNQLE1BQU1RLFdBQVcsSUFBSVIsTUFBTVMsV0FBVyxJQUFJO0lBQzlELGtFQUFrRTtJQUNsRSxJQUFJQyxXQUFXVixNQUFNVyxpQkFBaUIsSUFBSVgsTUFBTVksaUJBQWlCLElBQUk7SUFDckUsSUFBSUYsWUFBWSxPQUFPQSxhQUFhLFVBQVU7UUFDNUMsbUNBQW1DO1FBQ25DLE1BQU1HLFFBQVFILFNBQVNHLEtBQUssQ0FBQztRQUM3QixJQUFJQSxPQUFPSCxXQUFXLEdBQUdHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFQSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRUEsS0FBSyxDQUFDLEVBQUUsRUFBRTtJQUM3RDtJQUNBLGlDQUFpQztJQUNqQyxNQUFNQyxTQUFTO0lBQ2YsTUFBTUMsUUFBUTtJQUVkLE9BQU87UUFDTGQsSUFBSWUsT0FBT2Y7UUFDWEcsT0FBT0EsU0FBUyxPQUFPWSxPQUFPWixTQUFTO1FBQ3ZDRyxhQUFhQSxlQUFlLE9BQU9TLE9BQU9ULGVBQWU7UUFDekRHLFVBQVVBLFlBQVksT0FBT00sT0FBT04sWUFBWTtRQUNoREk7UUFDQUM7SUFDRjtBQUNGO0FBRUEsa0VBQWtFO0FBQzNELE1BQU1FO0lBQ1gsTUFBTUMsU0FBUzdCLFlBQW9CLFlBQVksRUFBRTtRQUMvQyxPQUFPLE1BQU1ELG1CQUFtQkM7SUFDbEM7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hZGVsZWluZXhpYS9HcmFudE1hc3Rlci9zZXJ2aWNlcy92aW5ub3ZhLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbi8vIFVzZSB0aGUgVmlubm92YSBPcGVuIERhdGEgQVBJIGJhc2UgVVJMXG5jb25zdCBWSU5OT1ZBX09QRU5fREFUQV9CQVNFX1VSTCA9ICdodHRwczovL2RhdGEudmlubm92YS5zZS9hcGknO1xuXG4vLyBGZXRjaCBjYWxscyAodXRseXNuaW5nYXIpIGZyb20gVmlubm92YSBPcGVuIERhdGEgQVBJXG4vLyBQYXNzIGEgZGF0ZSBzdHJpbmcgKGUuZy4sICcyMDE5LTA5LTAxJykgdG8gZ2V0IGFsbCBjYWxscyBjaGFuZ2VkIHNpbmNlIHRoYXQgZGF0ZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVmlubm92YUdyYW50cyhzaW5jZURhdGU6IHN0cmluZyA9ICcyMDE5LTA5LTAxJykge1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IGAke1ZJTk5PVkFfT1BFTl9EQVRBX0JBU0VfVVJMfS91dGx5c25pbmdhci8ke3NpbmNlRGF0ZX1gO1xuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBWaW5ub3ZhIG9wZW4gY2FsbHMgZnJvbTonLCB1cmwpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCk7XG4gICAgY29uc29sZS5sb2coJ1Zpbm5vdmEgT3BlbiBEYXRhIEFQSSByZXNwb25zZTonLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmRhdGEpO1xuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChheGlvcy5pc0F4aW9zRXJyb3IgJiYgYXhpb3MuaXNBeGlvc0Vycm9yKGVycm9yKSAmJiBlcnJvci5yZXNwb25zZSkge1xuICAgICAgY29uc29sZS5lcnJvcignVmlubm92YSBPcGVuIERhdGEgQVBJIGVycm9yOicsIGVycm9yLnJlc3BvbnNlLnN0YXR1cywgZXJyb3IucmVzcG9uc2UuZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Zpbm5vdmEgT3BlbiBEYXRhIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIE5vcm1hbGl6ZWRHcmFudCB0eXBlXG5leHBvcnQgdHlwZSBOb3JtYWxpemVkR3JhbnQgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmcgfCBudWxsO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgZGVhZGxpbmU6IHN0cmluZyB8IG51bGw7XG4gIHNlY3Rvcjogc3RyaW5nIHwgbnVsbDtcbiAgc3RhZ2U6IHN0cmluZyB8IG51bGw7XG59O1xuXG4vLyBub3JtYWxpemVHcmFudCBmdW5jdGlvblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUdyYW50KGlucHV0OiBhbnkpOiBOb3JtYWxpemVkR3JhbnQgfCBudWxsIHtcbiAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbDtcbiAgLy8gVXNlIFZpbm5vdmEgT3BlbiBEYXRhIGZpZWxkIG5hbWVzIChjYXNlLXNlbnNpdGl2ZSlcbiAgY29uc3QgaWQgPVxuICAgIHR5cGVvZiBpbnB1dC5EaWFyaWVudW1tZXIgPT09ICdzdHJpbmcnXG4gICAgICA/IGlucHV0LkRpYXJpZW51bW1lclxuICAgICAgOiB0eXBlb2YgaW5wdXQuZGlhcmllbnVtbWVyID09PSAnc3RyaW5nJ1xuICAgICAgPyBpbnB1dC5kaWFyaWVudW1tZXJcbiAgICAgIDogbnVsbDtcbiAgaWYgKCFpZCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgdGl0bGUgPSBpbnB1dC5UaXRlbCA/PyBpbnB1dC50aXRlbCA/PyBudWxsO1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IGlucHV0LkJlc2tyaXZuaW5nID8/IGlucHV0LmJlc2tyaXZuaW5nID8/IG51bGw7XG4gIC8vIE5vIGV4cGxpY2l0IGRlYWRsaW5lIGZpZWxkOyB1c2UgUHVibGljZXJpbmdzZGF0dW0gYXMgYSBmYWxsYmFja1xuICBsZXQgZGVhZGxpbmUgPSBpbnB1dC5QdWJsaWNlcmluZ3NkYXR1bSA/PyBpbnB1dC5wdWJsaWNlcmluZ3NkYXR1bSA/PyBudWxsO1xuICBpZiAoZGVhZGxpbmUgJiYgdHlwZW9mIGRlYWRsaW5lID09PSAnc3RyaW5nJykge1xuICAgIC8vIEZvcm1hdCBhcyBZWVlZLU1NLUREIGlmIHBvc3NpYmxlXG4gICAgY29uc3QgbWF0Y2ggPSBkZWFkbGluZS5tYXRjaCgvKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSkvKTtcbiAgICBpZiAobWF0Y2gpIGRlYWRsaW5lID0gYCR7bWF0Y2hbMV19LSR7bWF0Y2hbMl19LSR7bWF0Y2hbM119YDtcbiAgfVxuICAvLyBObyBzZWN0b3Igb3Igc3RhZ2UgaW4gdGhpcyBBUElcbiAgY29uc3Qgc2VjdG9yID0gbnVsbDtcbiAgY29uc3Qgc3RhZ2UgPSBudWxsO1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IFN0cmluZyhpZCksXG4gICAgdGl0bGU6IHRpdGxlICE9IG51bGwgPyBTdHJpbmcodGl0bGUpIDogbnVsbCxcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gIT0gbnVsbCA/IFN0cmluZyhkZXNjcmlwdGlvbikgOiBudWxsLFxuICAgIGRlYWRsaW5lOiBkZWFkbGluZSAhPSBudWxsID8gU3RyaW5nKGRlYWRsaW5lKSA6IG51bGwsXG4gICAgc2VjdG9yLFxuICAgIHN0YWdlLFxuICB9O1xufVxuXG4vLyBWaW5ub3ZhU2VydmljZSBjbGFzcyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIGV4aXN0aW5nIGNvZGUvdGVzdHNcbmV4cG9ydCBjbGFzcyBWaW5ub3ZhU2VydmljZSB7XG4gIGFzeW5jIGdldENhbGxzKHNpbmNlRGF0ZTogc3RyaW5nID0gJzIwMTktMDktMDEnKSB7XG4gICAgcmV0dXJuIGF3YWl0IGZldGNoVmlubm92YUdyYW50cyhzaW5jZURhdGUpO1xuICB9XG59Il0sIm5hbWVzIjpbImF4aW9zIiwiVklOTk9WQV9PUEVOX0RBVEFfQkFTRV9VUkwiLCJmZXRjaFZpbm5vdmFHcmFudHMiLCJzaW5jZURhdGUiLCJ1cmwiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJkYXRhIiwiZXJyb3IiLCJpc0F4aW9zRXJyb3IiLCJub3JtYWxpemVHcmFudCIsImlucHV0IiwiaWQiLCJEaWFyaWVudW1tZXIiLCJkaWFyaWVudW1tZXIiLCJ0aXRsZSIsIlRpdGVsIiwidGl0ZWwiLCJkZXNjcmlwdGlvbiIsIkJlc2tyaXZuaW5nIiwiYmVza3Jpdm5pbmciLCJkZWFkbGluZSIsIlB1YmxpY2VyaW5nc2RhdHVtIiwicHVibGljZXJpbmdzZGF0dW0iLCJtYXRjaCIsInNlY3RvciIsInN0YWdlIiwiU3RyaW5nIiwiVmlubm92YVNlcnZpY2UiLCJnZXRDYWxscyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./services/vinnova.ts\n");

/***/ }),

/***/ "(api-node)/./services/vinnovaSync.ts":
/*!*********************************!*\
  !*** ./services/vinnovaSync.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   syncVinnovaGrants: () => (/* binding */ syncVinnovaGrants)\n/* harmony export */ });\n/* harmony import */ var _vinnova__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vinnova */ \"(api-node)/./services/vinnova.ts\");\n/* harmony import */ var _app_lib_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../app/lib/supabase.js */ \"(api-node)/./app/lib/supabase.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vinnova__WEBPACK_IMPORTED_MODULE_0__]);\n_vinnova__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Using the JS supabase client for now; consider migrating to a TS client for full type safety\n\nasync function syncVinnovaGrants() {\n    const report = {\n        inserted: 0,\n        updated: 0,\n        unchanged: 0,\n        failed: 0,\n        errors: [],\n        total: 0,\n        startedAt: new Date().toISOString(),\n        finishedAt: null,\n        durationMs: null\n    };\n    try {\n        const vinnova = new _vinnova__WEBPACK_IMPORTED_MODULE_0__.VinnovaService();\n        const rawGrants = await vinnova.getCalls();\n        // Debug: print raw grants before normalization\n        // eslint-disable-next-line no-console\n        console.log('Raw grants:', rawGrants);\n        const grants = rawGrants.map(_vinnova__WEBPACK_IMPORTED_MODULE_0__.normalizeGrant).filter((g)=>!!g && !!g.id);\n        // Debug: print normalized grants after filtering\n        // eslint-disable-next-line no-console\n        console.log('Normalized grants:', grants);\n        report.total = grants.length;\n        for (const grant of grants){\n            try {\n                // Debug: print the grant being processed\n                // eslint-disable-next-line no-console\n                console.log('Processing grant:', grant);\n                // Check if grant already exists and if data has changed\n                const { data: existing, error: fetchError } = await _app_lib_supabase_js__WEBPACK_IMPORTED_MODULE_1__.supabase.from('grants').select('*').eq('id', grant.id).single();\n                // Debug: print fetch result\n                // eslint-disable-next-line no-console\n                console.log('Fetch result for id', grant.id, ':', {\n                    existing,\n                    fetchError\n                });\n                if (fetchError && fetchError.code !== 'PGRST116') {\n                    throw fetchError;\n                }\n                if (existing) {\n                    const changed = existing.title !== grant.title || existing.description !== grant.description || existing.deadline !== grant.deadline || existing.sector !== grant.sector || existing.stage !== grant.stage;\n                    if (!changed) {\n                        // Debug: log when a grant is unchanged\n                        // eslint-disable-next-line no-console\n                        console.log('Grant unchanged:', grant.id);\n                        report.unchanged++;\n                        continue;\n                    }\n                }\n                // Only upsert if new or changed\n                const upsertResult = await _app_lib_supabase_js__WEBPACK_IMPORTED_MODULE_1__.supabase.from('grants').upsert(grant, {\n                    onConflict: 'id'\n                });\n                // Debug: print upsert result\n                // eslint-disable-next-line no-console\n                console.log('Upsert result for id', grant.id, ':', upsertResult);\n                const { error: upsertError } = upsertResult;\n                if (upsertError) {\n                    report.failed++;\n                    report.errors.push({\n                        id: grant.id,\n                        error: upsertError.message\n                    });\n                } else if (existing) {\n                    report.updated++;\n                } else {\n                    report.inserted++;\n                }\n            } catch (err) {\n                report.failed++;\n                report.errors.push({\n                    id: grant.id,\n                    error: err.message || String(err)\n                });\n            }\n        }\n    } catch (err) {\n        report.failed = report.total;\n        report.errors.push({\n            error: err.message || String(err)\n        });\n    }\n    report.finishedAt = new Date().toISOString();\n    report.durationMs = new Date(report.finishedAt).getTime() - new Date(report.startedAt).getTime();\n    // eslint-disable-next-line no-console\n    console.log('Vinnova grants sync report:', report);\n    return report;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLE9BQU80QyxLQUFVO2dCQUNqQjdDLE9BQU9JLE1BQU07Z0JBQ2JKLE9BQU9LLE1BQU0sQ0FBQ3NDLElBQUksQ0FBQztvQkFBRXRCLElBQUlFLE1BQU1GLEVBQUU7b0JBQUVLLE9BQU9tQixJQUFJRCxPQUFPLElBQUlFLE9BQU9EO2dCQUFLO1lBQ3ZFO1FBQ0Y7SUFDRixFQUFFLE9BQU9BLEtBQVU7UUFDakI3QyxPQUFPSSxNQUFNLEdBQUdKLE9BQU9NLEtBQUs7UUFDNUJOLE9BQU9LLE1BQU0sQ0FBQ3NDLElBQUksQ0FBQztZQUFFakIsT0FBT21CLElBQUlELE9BQU8sSUFBSUUsT0FBT0Q7UUFBSztJQUN6RDtJQUNBN0MsT0FBT1UsVUFBVSxHQUFHLElBQUlGLE9BQU9DLFdBQVc7SUFDMUNULE9BQU9XLFVBQVUsR0FBRyxJQUFJSCxLQUFLUixPQUFPVSxVQUFVLEVBQUVxQyxPQUFPLEtBQUssSUFBSXZDLEtBQUtSLE9BQU9PLFNBQVMsRUFBRXdDLE9BQU87SUFDOUYsc0NBQXNDO0lBQ3RDaEMsUUFBUUMsR0FBRyxDQUFDLCtCQUErQmhCO0lBQzNDLE9BQU9BO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWRlbGVpbmV4aWEvR3JhbnRNYXN0ZXIvc2VydmljZXMvdmlubm92YVN5bmMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmlubm92YVNlcnZpY2UsIG5vcm1hbGl6ZUdyYW50LCBOb3JtYWxpemVkR3JhbnQgfSBmcm9tICcuL3Zpbm5vdmEnO1xuLy8gVXNpbmcgdGhlIEpTIHN1cGFiYXNlIGNsaWVudCBmb3Igbm93OyBjb25zaWRlciBtaWdyYXRpbmcgdG8gYSBUUyBjbGllbnQgZm9yIGZ1bGwgdHlwZSBzYWZldHlcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi4vYXBwL2xpYi9zdXBhYmFzZS5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY1JlcG9ydCB7XG4gIGluc2VydGVkOiBudW1iZXI7XG4gIHVwZGF0ZWQ6IG51bWJlcjtcbiAgdW5jaGFuZ2VkOiBudW1iZXI7XG4gIGZhaWxlZDogbnVtYmVyO1xuICBlcnJvcnM6IEFycmF5PHsgaWQ/OiBzdHJpbmc7IGVycm9yOiBzdHJpbmcgfT47XG4gIHRvdGFsOiBudW1iZXI7XG4gIHN0YXJ0ZWRBdDogc3RyaW5nO1xuICBmaW5pc2hlZEF0OiBzdHJpbmcgfCBudWxsO1xuICBkdXJhdGlvbk1zOiBudW1iZXIgfCBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3luY1Zpbm5vdmFHcmFudHMoKSA6IFByb21pc2U8U3luY1JlcG9ydD4ge1xuICBjb25zdCByZXBvcnQ6IFN5bmNSZXBvcnQgPSB7XG4gICAgaW5zZXJ0ZWQ6IDAsXG4gICAgdXBkYXRlZDogMCxcbiAgICB1bmNoYW5nZWQ6IDAsXG4gICAgZmFpbGVkOiAwLFxuICAgIGVycm9yczogW10sXG4gICAgdG90YWw6IDAsXG4gICAgc3RhcnRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgZmluaXNoZWRBdDogbnVsbCxcbiAgICBkdXJhdGlvbk1zOiBudWxsLFxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHZpbm5vdmEgPSBuZXcgVmlubm92YVNlcnZpY2UoKTtcbiAgICBjb25zdCByYXdHcmFudHMgPSBhd2FpdCB2aW5ub3ZhLmdldENhbGxzKCk7XG4gICAgLy8gRGVidWc6IHByaW50IHJhdyBncmFudHMgYmVmb3JlIG5vcm1hbGl6YXRpb25cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUubG9nKCdSYXcgZ3JhbnRzOicsIHJhd0dyYW50cyk7XG4gICAgY29uc3QgZ3JhbnRzOiBOb3JtYWxpemVkR3JhbnRbXSA9IHJhd0dyYW50cy5tYXAobm9ybWFsaXplR3JhbnQpLmZpbHRlcigoZyk6IGcgaXMgTm9ybWFsaXplZEdyYW50ID0+ICEhZyAmJiAhIWcuaWQpO1xuICAgIC8vIERlYnVnOiBwcmludCBub3JtYWxpemVkIGdyYW50cyBhZnRlciBmaWx0ZXJpbmdcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUubG9nKCdOb3JtYWxpemVkIGdyYW50czonLCBncmFudHMpO1xuICAgIHJlcG9ydC50b3RhbCA9IGdyYW50cy5sZW5ndGg7XG4gICAgZm9yIChjb25zdCBncmFudCBvZiBncmFudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIERlYnVnOiBwcmludCB0aGUgZ3JhbnQgYmVpbmcgcHJvY2Vzc2VkXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nIGdyYW50OicsIGdyYW50KTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgZ3JhbnQgYWxyZWFkeSBleGlzdHMgYW5kIGlmIGRhdGEgaGFzIGNoYW5nZWRcbiAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2dyYW50cycpXG4gICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgLmVxKCdpZCcsIGdyYW50LmlkKVxuICAgICAgICAgIC5zaW5nbGUoKTtcbiAgICAgICAgLy8gRGVidWc6IHByaW50IGZldGNoIHJlc3VsdFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmxvZygnRmV0Y2ggcmVzdWx0IGZvciBpZCcsIGdyYW50LmlkLCAnOicsIHsgZXhpc3RpbmcsIGZldGNoRXJyb3IgfSk7XG4gICAgICAgIGlmIChmZXRjaEVycm9yICYmIGZldGNoRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgICAgICAgIHRocm93IGZldGNoRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgY29uc3QgY2hhbmdlZCA9XG4gICAgICAgICAgICBleGlzdGluZy50aXRsZSAhPT0gZ3JhbnQudGl0bGUgfHxcbiAgICAgICAgICAgIGV4aXN0aW5nLmRlc2NyaXB0aW9uICE9PSBncmFudC5kZXNjcmlwdGlvbiB8fFxuICAgICAgICAgICAgZXhpc3RpbmcuZGVhZGxpbmUgIT09IGdyYW50LmRlYWRsaW5lIHx8XG4gICAgICAgICAgICBleGlzdGluZy5zZWN0b3IgIT09IGdyYW50LnNlY3RvciB8fFxuICAgICAgICAgICAgZXhpc3Rpbmcuc3RhZ2UgIT09IGdyYW50LnN0YWdlO1xuICAgICAgICAgIGlmICghY2hhbmdlZCkge1xuICAgICAgICAgICAgLy8gRGVidWc6IGxvZyB3aGVuIGEgZ3JhbnQgaXMgdW5jaGFuZ2VkXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dyYW50IHVuY2hhbmdlZDonLCBncmFudC5pZCk7XG4gICAgICAgICAgICByZXBvcnQudW5jaGFuZ2VkKys7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25seSB1cHNlcnQgaWYgbmV3IG9yIGNoYW5nZWRcbiAgICAgICAgY29uc3QgdXBzZXJ0UmVzdWx0ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgnZ3JhbnRzJylcbiAgICAgICAgICAudXBzZXJ0KGdyYW50LCB7IG9uQ29uZmxpY3Q6ICdpZCcgfSk7XG4gICAgICAgIC8vIERlYnVnOiBwcmludCB1cHNlcnQgcmVzdWx0XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKCdVcHNlcnQgcmVzdWx0IGZvciBpZCcsIGdyYW50LmlkLCAnOicsIHVwc2VydFJlc3VsdCk7XG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IHVwc2VydEVycm9yIH0gPSB1cHNlcnRSZXN1bHQ7XG4gICAgICAgIGlmICh1cHNlcnRFcnJvcikge1xuICAgICAgICAgIHJlcG9ydC5mYWlsZWQrKztcbiAgICAgICAgICByZXBvcnQuZXJyb3JzLnB1c2goeyBpZDogZ3JhbnQuaWQsIGVycm9yOiB1cHNlcnRFcnJvci5tZXNzYWdlIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgcmVwb3J0LnVwZGF0ZWQrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXBvcnQuaW5zZXJ0ZWQrKztcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgcmVwb3J0LmZhaWxlZCsrO1xuICAgICAgICByZXBvcnQuZXJyb3JzLnB1c2goeyBpZDogZ3JhbnQuaWQsIGVycm9yOiBlcnIubWVzc2FnZSB8fCBTdHJpbmcoZXJyKSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgcmVwb3J0LmZhaWxlZCA9IHJlcG9ydC50b3RhbDtcbiAgICByZXBvcnQuZXJyb3JzLnB1c2goeyBlcnJvcjogZXJyLm1lc3NhZ2UgfHwgU3RyaW5nKGVycikgfSk7XG4gIH1cbiAgcmVwb3J0LmZpbmlzaGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gIHJlcG9ydC5kdXJhdGlvbk1zID0gbmV3IERhdGUocmVwb3J0LmZpbmlzaGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKHJlcG9ydC5zdGFydGVkQXQpLmdldFRpbWUoKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgY29uc29sZS5sb2coJ1Zpbm5vdmEgZ3JhbnRzIHN5bmMgcmVwb3J0OicsIHJlcG9ydCk7XG4gIHJldHVybiByZXBvcnQ7XG59ICJdLCJuYW1lcyI6WyJWaW5ub3ZhU2VydmljZSIsIm5vcm1hbGl6ZUdyYW50Iiwic3VwYWJhc2UiLCJzeW5jVmlubm92YUdyYW50cyIsInJlcG9ydCIsImluc2VydGVkIiwidXBkYXRlZCIsInVuY2hhbmdlZCIsImZhaWxlZCIsImVycm9ycyIsInRvdGFsIiwic3RhcnRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZmluaXNoZWRBdCIsImR1cmF0aW9uTXMiLCJ2aW5ub3ZhIiwicmF3R3JhbnRzIiwiZ2V0Q2FsbHMiLCJjb25zb2xlIiwibG9nIiwiZ3JhbnRzIiwibWFwIiwiZmlsdGVyIiwiZyIsImlkIiwibGVuZ3RoIiwiZ3JhbnQiLCJkYXRhIiwiZXhpc3RpbmciLCJlcnJvciIsImZldGNoRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJjb2RlIiwiY2hhbmdlZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkZWFkbGluZSIsInNlY3RvciIsInN0YWdlIiwidXBzZXJ0UmVzdWx0IiwidXBzZXJ0Iiwib25Db25mbGljdCIsInVwc2VydEVycm9yIiwicHVzaCIsIm1lc3NhZ2UiLCJlcnIiLCJTdHJpbmciLCJnZXRUaW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./services/vinnovaSync.ts\n");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcron%2Fsync-grants&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcron%2Fsync-grants.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();